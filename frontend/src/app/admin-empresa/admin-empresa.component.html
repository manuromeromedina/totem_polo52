<!-- admin-empresa.component.html -->
<link
  href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Material+Symbols+Outlined:FILL@0..1"
  rel="stylesheet"
/>

<div class="admin-layout">
  <!-- NAVBAR SUPERIOR -->
  <!-- TOP NAV -->
  <nav class="topbar">
    <div class="topbar-left">
      <img
        class="brand-logo"
        src="../../assets/images/polologo-blanco.png"
        alt="Polo 52"
      />
      <div class="topbar-title">
        <div class="app-title">POLO 52</div>
        <div class="app-sub">Parque Industrial</div>
      </div>
    </div>

    <div class="topbar-tabs">
      <button
        class="tab"
        [class.active]="activeTab === 'resumen'"
        (click)="goTo('resumen')"
      >
        Resumen
      </button>
      <button
        class="tab"
        [class.active]="activeTab === 'vehiculos'"
        (click)="goTo('vehiculos')"
      >
        Veh√≠culos
      </button>
      <button
        class="tab"
        [class.active]="activeTab === 'servicios'"
        (click)="goTo('servicios')"
      >
        Servicios
      </button>
      <button
        class="tab"
        [class.active]="activeTab === 'contactos'"
        (click)="goTo('contactos')"
      >
        Contactos
      </button>
      <button
        class="tab"
        [class.active]="activeTab === 'perfil'"
        (click)="goTo('perfil')"
      >
        Mi Informaci√≥n
      </button>
    </div>

    <div class="topbar-right">
      <button class="pill">Empresa Activa</button>
      <button class="ghost" (click)="goTo('config')">Mi Perfil</button>
      <app-logout-button></app-logout-button>
    </div>
  </nav>

  <!-- MAIN -->
  <main class="content">
    <!-- ========== RESUMEN ============================================================================ -->
    <!-- RESUMEN -->
    <section *ngIf="activeTab === 'resumen'" class="resume-grid">
      <!-- M√©tricas -->
      <div class="kpi card">
        <div class="kpi-head">
          <div class="kpi-title">Veh√≠culos Activos</div>
          <span class="material-symbols-outlined">local_shipping</span>
        </div>
        <div class="kpi-number">{{ vehiculosActivos }}</div>
        <div class="kpi-sub">de {{ vehiculosActivos }} total</div>
      </div>

      <div class="kpi card">
        <div class="kpi-head">
          <div class="kpi-title">Servicios Ofrecidos</div>
          <span class="material-symbols-outlined">stacked_bar_chart</span>
        </div>
        <div class="kpi-number">{{ totalServicios }}</div>
        <div class="kpi-sub">servicios disponibles</div>
      </div>

      <div class="kpi card">
        <div class="kpi-head">
          <div class="kpi-title">Contactos</div>
          <span class="material-symbols-outlined">group</span>
        </div>
        <div class="kpi-number">{{ totalContactos }}</div>
        <div class="kpi-sub">personas de contacto</div>
      </div>

      <div class="kpi card">
        <div class="kpi-head">
          <div class="kpi-title">Estado</div>
          <span class="material-symbols-outlined">schedule</span>
        </div>
        <div
          class="status"
          [class.active]="estaActiva"
          [class.inactive]="!estaActiva"
        >
          {{ estaActiva ? "Activo" : "Inactivo" }}
        </div>
        <div class="kpi-sub">desde {{ desdeIngreso }}</div>
      </div>

      <!-- Actividad reciente -->
      <div class="card activity">
        <h2>Actividad Reciente</h2>
        <ul class="activity-list" *ngIf="actividadReciente.length; else noAct">
          <li *ngFor="let a of actividadReciente">
            <span
              class="dot"
              [class.ok]="a.tipo === 'ok'"
              [class.warn]="a.tipo === 'warn'"
              [class.info]="a.tipo === 'info'"
            ></span>
            <div class="a-texts">
              <div class="a-title">{{ a.titulo }}</div>
              <div class="a-when">{{ a.cuando }}</div>
            </div>
          </li>
        </ul>
        <ng-template #noAct
          ><div class="muted">Sin actividad por ahora.</div></ng-template
        >
      </div>

      <!-- Accesos r√°pidos -->
      <div class="card quick">
        <h2>Accesos R√°pidos</h2>
        <div class="quick-list">
          <button class="quick-btn" (click)="quickAddVehiculo()">
            <span class="material-symbols-outlined">add</span> Agregar Veh√≠culo
          </button>
          <button class="quick-btn" (click)="quickAddServicio()">
            <span class="material-symbols-outlined">add</span> Nuevo Servicio
          </button>
          <button class="quick-btn" (click)="quickAddContacto()">
            <span class="material-symbols-outlined">add</span> Agregar Contacto
          </button>
        </div>
      </div>
    </section>

    <!-- PERFIL =========================================================================== -->
    <section *ngIf="activeTab === 'perfil'" class="card-grid">
      <!-- Datos solo-lectura -->
      <div class="card">
        <h2>Datos</h2>
        <div class="grid-2 nice-form">
          <div class="field">
            <label>CUIL</label>
            <input type="text" [value]="empresaData?.cuil" disabled />
          </div>
          <div class="field">
            <label>Nombre</label>
            <input type="text" [value]="empresaData?.nombre" disabled />
          </div>
          <div class="field">
            <label>Rubro</label>
            <input type="text" [value]="empresaData?.rubro" disabled />
          </div>
          <div class="field">
            <label>Fecha ingreso</label>
            <input
              type="text"
              [value]="formatDate(empresaData?.fecha_ingreso || '')"
              disabled
            />
          </div>
        </div>
      </div>

      <!-- Editar empresa (self) -->
      <div class="card">
        <div class="actions">
          <button
            class="btn primary"
            type="button"
            (click)="openEmpresaEditForm()"
          >
            <span class="material-symbols-outlined">edit</span>
            <span>Editar datos</span>
          </button>
        </div>
      </div>
    </section>

    <!-- VEHICULOS ============================================================ -->
    <section *ngIf="activeTab === 'vehiculos'" class="card-stack">
      <div class="card">
        <div class="actions">
          <button
            class="btn primary"
            type="button"
            (click)="openVehiculoForm()"
          >
            <span class="material-symbols-outlined">add_circle</span>
            <span>Nuevo veh√≠culo</span>
          </button>
        </div>
      </div>

      <!-- Listado -->
      <div class="card">
        <h2>Listado</h2>
        <div class="table">
          <div class="thead">
            <div>Tipo</div>
            <div>Horarios</div>
            <div>Frecuencia</div>
            <div>Datos</div>
            <div>Acciones</div>
          </div>

          <div class="row" *ngFor="let v of filteredVehiculos">
            <div>
              {{
                v.id_tipo_vehiculo
                  ? getTipoVehiculoName(v.id_tipo_vehiculo)
                  : "-"
              }}
            </div>

            <div>{{ v.horarios || "-" }}</div>
            <div>{{ v.frecuencia || "-" }}</div>
            <div>
              <ng-container *ngIf="v.datos">
                <span *ngIf="v.datos.cantidad"
                  >Cantidad: {{ v.datos.cantidad }}</span
                ><br />
                <span *ngIf="v.datos.patente"
                  >Patente: {{ v.datos.patente }}</span
                ><br />
                <span *ngIf="v.datos.carga">Carga: {{ v.datos.carga }}</span
                ><br />
                <span *ngIf="v.datos.descripcion">{{
                  v.datos.descripcion
                }}</span>
              </ng-container>
              <span *ngIf="!v.datos || !hasKeys(v.datos)">‚Äì</span>
            </div>

            <div class="row-actions">
              <button
                class="btn icon"
                title="Editar"
                (click)="openVehiculoForm(v)"
              >
                <span class="material-symbols-outlined">edit</span>
              </button>
              <button
                class="btn icon danger"
                title="Eliminar"
                (click)="deleteVehiculo(v.id_vehiculo)"
              >
                <span class="material-symbols-outlined">delete</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- CONTACTOS ===================================================================================-->
    <section *ngIf="activeTab === 'contactos'" class="card-stack">
      <div class="card">
        <div class="actions">
          <button
            class="btn primary"
            type="button"
            (click)="openContactoForm()"
          >
            <span class="material-symbols-outlined">add_circle</span>
            <span>Nuevo contacto</span>
          </button>
        </div>
      </div>

      <div class="card">
        <h2>Listado</h2>
        <div class="table">
          <div class="thead">
            <div>Tipo</div>
            <div>Nombre</div>
            <div>Tel√©fono</div>
            <div>Direcci√≥n</div>
            <div>Datos</div>
            <div>Acciones</div>
          </div>

          <div class="row" *ngFor="let c of filteredContactos">
            <div>
              {{
                c.id_tipo_contacto
                  ? getTipoContactoName(c.id_tipo_contacto)
                  : "-"
              }}
            </div>

            <div>{{ c.nombre }}</div>
            <div>{{ c.telefono || "-" }}</div>
            <div>{{ c.direccion || "-" }}</div>
            <div>
              <ng-container *ngIf="c.datos">
                <span *ngIf="c.datos.pagina_web"
                  >üåê {{ c.datos.pagina_web }}</span
                ><br />
                <span *ngIf="c.datos.correo">‚úâÔ∏è {{ c.datos.correo }}</span
                ><br />
                <span *ngIf="c.datos.redes_sociales"
                  >üîó {{ c.datos.redes_sociales }}</span
                ><br />
                <span *ngIf="c.datos.descripcion">{{
                  c.datos.descripcion
                }}</span>
              </ng-container>
              <span *ngIf="!c.datos || !hasKeys(c.datos)">‚Äì</span>
            </div>

            <div class="row-actions">
              <button
                class="btn icon"
                title="Editar"
                (click)="openContactoForm(c)"
              >
                <span class="material-symbols-outlined">edit</span>
              </button>
              <button
                class="btn icon danger"
                title="Eliminar"
                (click)="deleteContacto(c.id_contacto)"
              >
                <span class="material-symbols-outlined">delete</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- SERVICIOS PROPIOS ==============================================================================-->
    <section *ngIf="activeTab === 'servicios'" class="card-stack">
      <div class="card">
        <div class="actions">
          <button
            class="btn primary"
            type="button"
            (click)="openServicioForm()"
          >
            <span class="material-symbols-outlined">add_circle</span>
            <span>Nuevo servicio</span>
          </button>
        </div>
      </div>

      <div class="card">
        <h2>Listado</h2>
        <div class="table">
          <div class="thead">
            <div>Tipo</div>
            <div>Datos</div>
            <div>Acciones</div>
          </div>

          <div class="row" *ngFor="let s of filteredServicios">
            <div>
              {{
                s.id_tipo_servicio
                  ? getTipoServicioName(s.id_tipo_servicio)
                  : "-"
              }}
            </div>

            <div>
              <div>
                <ng-container *ngIf="s.datos">
                  <!-- Agua -->
                  <ng-container *ngIf="s.id_tipo_servicio === 1">
                    <span>üå± Biofiltro: {{ s.datos.biofiltro }}</span
                    ><br />
                    <span
                      >üíß Tratamiento:
                      {{ s.datos.tratamiento_aguas_grises }}</span
                    >
                  </ng-container>

                  <!-- Espacios verdes -->
                  <ng-container *ngIf="s.id_tipo_servicio === 2">
                    <span>üèõÔ∏è Abierto: {{ s.datos.abierto }}</span
                    ><br />
                    <span>üìè Superficie: {{ s.datos.m2 }} m¬≤</span>
                  </ng-container>

                  <!-- Internet -->
                  <ng-container *ngIf="s.id_tipo_servicio === 3">
                    <span>üåê Tipo: {{ s.datos.tipo }}</span
                    ><br />
                    <span>üè≠ Proveedor: {{ s.datos.proveedor }}</span>
                  </ng-container>

                  <!-- Residuos -->
                  <ng-container *ngIf="s.id_tipo_servicio === 4">
                    <span>‚ôªÔ∏è Tipo: {{ s.datos.tipo }}</span
                    ><br />
                    <span>#Ô∏è‚É£ Cantidad: {{ s.datos.cantidad }}</span>
                  </ng-container>

                  <!-- Default -->
                  <ng-container *ngIf="!s.id_tipo_servicio">
                    <span>üìù {{ s.datos.descripcion }}</span>
                  </ng-container>
                </ng-container>

                <span *ngIf="!s.datos || !hasKeys(s.datos)">‚Äì</span>
              </div>
            </div>
            <div class="row-actions">
              <button
                class="btn icon"
                title="Editar"
                (click)="openServicioForm(s)"
              >
                <span class="material-symbols-outlined">edit</span>
              </button>
              <button
                class="btn icon danger"
                title="Eliminar"
                (click)="deleteServicio(s.id_servicio)"
              >
                <span class="material-symbols-outlined">delete</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- SERVICIOS POLO (solo lectura) ==================================================================-->
    <section *ngIf="activeTab === 'serviciosPolo'" class="card">
      <h2>Servicios del Polo asociados</h2>
      <div class="table">
        <div class="thead">
          <div>Nombre</div>
          <div>Tipo</div>
          <div>Horario</div>
          <div>Propietario</div>
          <div>Lotes</div>
        </div>

        <div class="row" *ngFor="let sp of filteredServiciosPolo">
          <div>{{ sp.nombre }}</div>
          <div>{{ sp.tipo_servicio_polo || "-" }}</div>
          <div>{{ sp.horario || "-" }}</div>
          <div>{{ sp.propietario || "-" }}</div>
          <div>
            <ng-container *ngIf="sp.lotes?.length; else sinLotes">
              <span *ngFor="let l of sp.lotes"
                >M{{ l.manzana }}-L{{ l.lote }}&nbsp;</span
              >
            </ng-container>
            <ng-template #sinLotes>‚Äì</ng-template>
          </div>
        </div>
      </div>
    </section>

    <!-- CONFIGURACI√ìN  ==============================================================================-->
    <section *ngIf="activeTab === 'config'" class="card-grid">
      <div class="card">
        <h2>Contrase√±a</h2>
        <button class="btn" type="button" (click)="openPasswordModal()">
          <span class="material-symbols-outlined">vpn_key</span>
          <span>Cambiar contrase√±a</span>
        </button>
      </div>
      <div class="card">
        <h2>Sesi√≥n</h2>
        <p>Salir de la cuenta de empresa.</p>
        <app-logout-button></app-logout-button>
      </div>
      <app-password-change-modal
        *ngIf="showPasswordModal"
        (closed)="onPasswordModalClosed()"
        (changed)="onPasswordChanged(true)"
      >
      </app-password-change-modal>
    </section>
  </main>
</div>

<!-- =============== OVERLAYS DE FORMULARIO ======================================================== -->
<!-- ============================================================================================== -->

<!-- Empresa: editar propios -->
<div class="overlay" *ngIf="showEmpresaEditForm">
  <div class="modal modal--md">
    <div class="modal-header">
      <h3>Editar datos de la empresa</h3>
      <button
        type="button"
        class="icon-btn"
        (click)="cancelForm('empresa')"
        aria-label="Cerrar"
      >
        ‚úï
      </button>
    </div>

    <form (ngSubmit)="onSubmitEmpresaEdit()" class="nice-form">
      <div class="modal-body grid-3">
        <div class="field">
          <label>Cant. empleados</label>
          <input
            type="number"
            [(ngModel)]="empresaEditForm.cant_empleados"
            name="cant_empleados"
          />
        </div>
        <div class="field">
          <label>Horario trabajo</label>
          <input
            type="text"
            [(ngModel)]="empresaEditForm.horario_trabajo"
            name="horario_trabajo"
            placeholder="Lun‚ÄìVie 8‚Äì17"
          />
        </div>
        <div class="field col-3">
          <label>Observaciones</label>
          <textarea
            rows="4"
            [(ngModel)]="empresaEditForm.observaciones"
            name="observaciones"
          ></textarea>
        </div>
      </div>

      <div class="modal-actions">
        <button class="btn primary" type="submit">Guardar cambios</button>
        <button class="btn ghost" type="button" (click)="cancelForm('empresa')">
          Cancelar
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Veh√≠culo: crear/editar -->
<div class="overlay" *ngIf="showVehiculoForm">
  <div class="modal modal--lg">
    <div class="modal-header">
      <h3>
        {{ editingVehiculo ? "Editar veh√≠culo" : "Nuevo veh√≠culo" }}
      </h3>
      <button
        type="button"
        class="icon-btn"
        (click)="cancelForm('vehiculo')"
        aria-label="Cerrar"
      >
        ‚úï
      </button>
    </div>

    <form (ngSubmit)="onSubmitVehiculo()" class="nice-form">
      <div class="modal-body grid-3">
        <div class="field col-3">
          <label>Tipo</label>
          <select
            [(ngModel)]="vehiculoForm.id_tipo_vehiculo"
            name="v_id_tipo_vehiculo"
            (ngModelChange)="onVehiculoTipoChange()"
            required
          >
            <option
              *ngFor="let t of tiposVehiculo"
              [ngValue]="t.id_tipo_vehiculo"
            >
              {{ t.tipo }}
            </option>
          </select>
        </div>

        <div class="field">
          <label>Horarios</label>
          <input
            type="text"
            [(ngModel)]="vehiculoForm.horarios"
            name="v_horarios"
            placeholder="08-18"
          />
        </div>
        <div class="field">
          <label>Frecuencia</label>
          <input
            type="text"
            [(ngModel)]="vehiculoForm.frecuencia"
            name="v_frecuencia"
            placeholder="Diaria / Semanal"
          />
        </div>

        <!-- Condicionales -->
        <ng-container [ngSwitch]="vehiculoForm.id_tipo_vehiculo">
          <!-- 1: Corporativo -->
          <ng-container *ngSwitchCase="1">
            <div class="field">
              <label>Cantidad</label>
              <input
                type="number"
                [(ngModel)]="vehiculoForm.datos.cantidad"
                name="v_datos_cantidad"
                required
              />
            </div>
            <div class="field">
              <label>Patente</label>
              <input
                type="text"
                [(ngModel)]="vehiculoForm.datos.patente"
                name="v_datos_patente"
                placeholder="ABC123"
                required
              />
            </div>
            <div class="field">
              <label>Carga</label>
              <select
                [(ngModel)]="vehiculoForm.datos.carga"
                name="v_datos_carga"
                required
              >
                <option [ngValue]="null">‚Äî</option>
                <option value="baja">Baja</option>
                <option value="mediana">Mediana</option>
                <option value="alta">Alta</option>
              </select>
            </div>
          </ng-container>

          <!-- 2: Personal -->
          <ng-container *ngSwitchCase="2">
            <div class="field">
              <label>Cantidad</label>
              <input
                type="number"
                [(ngModel)]="vehiculoForm.datos.cantidad"
                name="v_datos_cantidad"
                required
              />
            </div>
            <div class="field">
              <label>Patente</label>
              <input
                type="text"
                [(ngModel)]="vehiculoForm.datos.patente"
                name="v_datos_patente"
                placeholder="ABC123"
                required
              />
            </div>
          </ng-container>

          <!-- 3: Terceros -->
          <ng-container *ngSwitchCase="3">
            <div class="field">
              <label>Cantidad</label>
              <input
                type="number"
                [(ngModel)]="vehiculoForm.datos.cantidad"
                name="v_datos_cantidad"
                required
              />
            </div>
            <div class="field">
              <label>Carga</label>
              <select
                [(ngModel)]="vehiculoForm.datos.carga"
                name="v_datos_carga"
                required
              >
                <option [ngValue]="null">‚Äî</option>
                <option value="baja">Baja</option>
                <option value="mediana">Mediana</option>
                <option value="alta">Alta</option>
              </select>
            </div>
          </ng-container>

          <!-- default -->
          <ng-container *ngSwitchDefault>
            <div class="field col-3">
              <label>Datos (opcional)</label>
              <input
                type="text"
                [(ngModel)]="vehiculoForm.datos.descripcion"
                name="v_datos_desc"
                placeholder="Descripci√≥n..."
              />
            </div>
          </ng-container>
        </ng-container>
      </div>

      <div class="modal-actions">
        <button class="btn primary" type="submit">
          {{ editingVehiculo ? "Actualizar" : "Agregar" }}
        </button>
        <button
          class="btn ghost"
          type="button"
          (click)="cancelForm('vehiculo')"
        >
          Cancelar
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Contacto: crear/editar -->
<div class="overlay" *ngIf="showContactoForm">
  <div class="modal modal--md">
    <div class="modal-header">
      <h3>
        {{ editingContacto ? "Editar contacto" : "Nuevo contacto" }}
      </h3>
      <button
        type="button"
        class="icon-btn"
        (click)="cancelForm('contacto')"
        aria-label="Cerrar"
      >
        ‚úï
      </button>
    </div>

    <form (ngSubmit)="onSubmitContacto()" class="nice-form">
      <div class="modal-body grid-3">
        <!-- Tipo -->
        <div class="field">
          <label>Tipo</label>
          <select
            [(ngModel)]="contactoForm.id_tipo_contacto"
            (ngModelChange)="onTipoContactoChange()"
            name="c_id_tipo_contacto"
            required
          >
            <option
              *ngFor="let t of tiposContacto"
              [ngValue]="t.id_tipo_contacto"
            >
              {{ t.tipo }}
            </option>
          </select>
        </div>

        <!-- Nombre -->
        <div class="field">
          <label>Nombre</label>
          <input
            type="text"
            [(ngModel)]="contactoForm.nombre"
            name="c_nombre"
            required
          />
        </div>

        <!-- Tel√©fono -->
        <div class="field">
          <label>Tel√©fono</label>
          <input
            type="text"
            [(ngModel)]="contactoForm.telefono"
            name="c_telefono"
            placeholder="Ej: +54 9 11 1234-5678"
          />
        </div>

        <!-- Direccion -->
        <div class="field col-3">
          <label>Direcci√≥n</label>
          <input
            type="text"
            [(ngModel)]="contactoForm.direccion"
            name="c_direccion"
            placeholder="Calle 123, Ciudad"
          />
        </div>

        <!-- Campos din√°micos seg√∫n tipo -->
        <div class="field col-3" [ngSwitch]="contactoForm.id_tipo_contacto">
          <!-- Comercial -->
          <ng-container *ngSwitchCase="1">
            <label>Datos comerciales</label>
            <div class="inline-3">
              <input
                type="text"
                [(ngModel)]="contactoForm.datos.pagina_web"
                name="c_datos_web"
                placeholder="https://empresa.com"
                required
              />
              <input
                type="email"
                [(ngModel)]="contactoForm.datos.correo"
                name="c_datos_correo"
                placeholder="mail@empresa.com"
                required
              />
              <input
                type="text"
                [(ngModel)]="contactoForm.datos.redes_sociales"
                name="c_datos_rrss"
                placeholder="@empresa"
                required
              />
            </div>
          </ng-container>
        </div>
      </div>

      <div class="modal-actions">
        <button class="btn primary" type="submit">
          {{ editingContacto ? "Actualizar" : "Agregar" }}
        </button>
        <button
          class="btn ghost"
          type="button"
          (click)="cancelForm('contacto')"
        >
          Cancelar
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Servicio propio: crear/editar -->
<div class="overlay" *ngIf="showServicioForm">
  <div class="modal modal--md">
    <div class="modal-header">
      <h3>
        {{ editingServicio ? "Editar servicio" : "Nuevo servicio" }}
      </h3>
      <button
        type="button"
        class="icon-btn"
        (click)="cancelForm('servicio')"
        aria-label="Cerrar"
      >
        ‚úï
      </button>
    </div>

    <form (ngSubmit)="onSubmitServicio()" class="nice-form">
      <div class="modal-body grid-3">
        <div class="field">
          <label>Tipo</label>
          <select
            [(ngModel)]="servicioForm.id_tipo_servicio"
            (ngModelChange)="onTipoServicioChange()"
            name="s_id_tipo_servicio"
            required
          >
            <option
              *ngFor="let t of tiposServicio"
              [ngValue]="t.id_tipo_servicio"
            >
              {{ t.tipo }}
            </option>
          </select>
        </div>

        <ng-container [ngSwitch]="servicioForm.id_tipo_servicio">
          <!-- 1: Agua -->
          <div class="field col-3" *ngSwitchCase="1">
            <label>Servicio de Agua</label>
            <input
              type="text"
              [(ngModel)]="servicioForm.datos.biofiltro"
              name="s_biofiltro"
              placeholder="¬øCuenta con biofiltro? (s√≠/no)"
              required
            />
            <input
              type="text"
              [(ngModel)]="servicioForm.datos.tratamiento_aguas_grises"
              name="s_aguas"
              placeholder="Tratamiento aguas grises"
              required
            />
          </div>

          <!-- 2: Espacios Verdes -->
          <div class="field col-3" *ngSwitchCase="2">
            <label>Servicio de Espacios Verdes</label>
            <input
              type="text"
              [(ngModel)]="servicioForm.datos.abierto"
              name="s_abierto"
              placeholder="¬øAbierto al p√∫blico? (s√≠/no)"
              required
            />
            <input
              type="number"
              [(ngModel)]="servicioForm.datos.m2"
              name="s_m2"
              placeholder="Superficie en m¬≤"
              required
            />
          </div>

          <!-- 3: Internet -->
          <div class="field col-3" *ngSwitchCase="3">
            <label>Servicio de Internet</label>
            <input
              type="text"
              [(ngModel)]="servicioForm.datos.tipo"
              name="s_tipo"
              placeholder="Tipo de conexi√≥n (Fibra, ADSL, etc.)"
              required
            />
            <input
              type="text"
              [(ngModel)]="servicioForm.datos.proveedor"
              name="s_proveedor"
              placeholder="Proveedor"
              required
            />
          </div>

          <!-- 4: Residuos -->
          <div class="field col-3" *ngSwitchCase="4">
            <label>Servicio de Residuos</label>
            <input
              type="text"
              [(ngModel)]="servicioForm.datos.tipo"
              name="s_tipo_e"
              placeholder="Tipo de residuo (org√°nico, pl√°stico, etc.)"
              required
            />
            <input
              type="number"
              [(ngModel)]="servicioForm.datos.cantidad"
              name="s_cantidad"
              placeholder="Cantidad recolectada"
              required
            />
          </div>
        </ng-container>
      </div>

      <div class="modal-actions">
        <button class="btn primary" type="submit">
          {{ editingServicio ? "Actualizar" : "Agregar" }}
        </button>
        <button
          class="btn ghost"
          type="button"
          (click)="cancelForm('servicio')"
        >
          Cancelar
        </button>
      </div>
    </form>
  </div>
</div>
