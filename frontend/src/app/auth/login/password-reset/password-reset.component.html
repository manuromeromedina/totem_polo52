<div class="reset-password-container">
  <div class="reset-password-box">
    <div class="header">
      <h2>Restablecer Contraseña</h2>
      <p class="subtitle">Ingresa tu nueva contraseña</p>
    </div>

    <!-- Mostrar error si no hay token -->
    <div *ngIf="!token" class="error-container">
      <div class="error-message">
        <i class="fas fa-exclamation-triangle"></i>
        {{ error }}
      </div>
      <button type="button" class="secondary-button" (click)="goToLogin()">
        Volver al Login
      </button>
    </div>

    <!-- Formulario de reset (solo si hay token) -->
    <form
      *ngIf="token"
      #resetForm="ngForm"
      (ngSubmit)="onResetPassword(resetForm)"
    >
      <div class="form-group">
        <label for="newPassword">
          <i class="fas fa-lock"></i>
          Nueva Contraseña
        </label>
        <input
          id="newPassword"
          name="newPassword"
          type="password"
          [(ngModel)]="newPassword"
          placeholder="Mínimo 6 caracteres"
          required
          minlength="6"
          [class.error]="newPassword && newPassword.length < 6"
        />
        <div *ngIf="newPassword && newPassword.length < 6" class="field-hint">
          La contraseña debe tener al menos 6 caracteres
        </div>
      </div>

      <div class="form-group">
        <label for="confirmPassword">
          <i class="fas fa-lock"></i>
          Confirmar Contraseña
        </label>
        <input
          id="confirmPassword"
          name="confirmPassword"
          type="password"
          [(ngModel)]="confirmPassword"
          placeholder="Repite la nueva contraseña"
          required
          minlength="6"
          [class.error]="confirmPassword && newPassword !== confirmPassword"
        />
        <div
          *ngIf="confirmPassword && newPassword !== confirmPassword"
          class="field-hint error"
        >
          Las contraseñas no coinciden
        </div>
      </div>

      <div class="button-group">
        <button
          type="submit"
          class="primary-button"
          [disabled]="
            resetForm.invalid || loading || newPassword !== confirmPassword
          "
        >
          <i *ngIf="loading" class="fas fa-spinner fa-spin"></i>
          {{ loading ? "Actualizando..." : "Restablecer Contraseña" }}
        </button>

        <button type="button" class="secondary-button" (click)="goToLogin()">
          Cancelar
        </button>
      </div>
    </form>

    <!-- Mensajes de estado -->
    <div *ngIf="message" class="success-container">
      <div class="success-message">
        <i class="fas fa-check-circle"></i>
        {{ message }}
      </div>
    </div>

    <div *ngIf="error && token" class="error-container">
      <div class="error-message">
        <i class="fas fa-exclamation-triangle"></i>
        {{ error }}
      </div>
    </div>
  </div>
</div>
